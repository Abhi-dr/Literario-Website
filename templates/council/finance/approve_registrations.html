{% extends "council/member/base.html" %}
{% block title %}Welcome {{ profile.first_name }}! {% endblock %}

{% block content %}

<div class="p-4 sm:ml-64">
    <h1 class="dark:text-white font-bold mt-14 text-center" style="font-family: cursive; font-size: large;">
        Welcome To The Family ❤️
    </h1>
</div>

<div class="p-4 sm:ml-64">
    <div class="relative px-4 py-10 bg-white shadow-lg sm:rounded-3xl sm:p-20">

        {% for message in messages %}

        <div id="alert-2"
            class="flex items-center p-4 mb-4 text-red-800 rounded-lg bg-{{ message.tags }}-50 dark:bg-gray-800 dark:text-{{ message.tags }}-400"
            role="alert">
            <span class="sr-only">OOPS!</span>

            <div class="m-sm-5 text-sm font-medium">
                {{ message }}
            </div>

            <button type="button"
                class="ms-auto -mx-1.5 -my-1.5 bg-red-50 text-{{ message.tags }}-500 rounded-lg focus:ring-2 focus:ring-red-400 p-1.5 hover:bg-{{ message.tags }}-200 inline-flex items-center justify-center h-8 w-8 dark:bg-gray-800 dark:text-{{ message.tags }}-400 dark:hover:bg-gray-700"
                data-dismiss-target="#alert-2" aria-label="Close">
                <span class="sr-only">Close</span>
                <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                    viewBox="0 0 14 14">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
                </svg>
            </button>
        </div>

        {% endfor %}

    </div>
</div>

<div class="p-4 sm:ml-64">
    <strong class="text-green-100" style="font-family: cursive; font-size: 22px;">Unapproved Registrations</strong>
    <div class="p-4 border-2 border-gray-200 border-dashed rounded-lg dark:border-gray-700 mt-1">
        <div class="relative overflow-x-auto shadow-md sm:rounded-lg">
            <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
                <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                    <tr>
                        <th scope="col" class="px-6 py-3 text-gray-900 font-bold dark:text-white">
                            #
                        </th>
                        <th scope="col" class="px-6 py-3 text-gray-900 font-bold dark:text-white">
                            Name
                        </th>
                        <th scope="col" class="px-6 py-3 text-center text-gray-900 font-bold dark:text-white">
                            Course-Year
                        </th>
                        <th scope="col" class="px-6 py-3 text-center text-gray-900 font-bold dark:text-white">
                            Event
                        </th>
                        <th scope="col" class="px-6 py-3 text-center text-gray-900 font-bold dark:text-white">
                            Payment Screenshot
                        </th>

                        <th scope="col" class="px-6 py-3 text-center text-gray-900 font-bold dark:text-white">
                            Mobile Number
                        </th>
                        
                        <th scope="col" class="px-6 py-3 text-center text-gray-900 font-bold dark:text-white">
                            UTR Number
                        </th>
                        <th scope="col" class="px-6 py-3 text-center text-gray-900 font-bold dark:text-white">
                            ACTION
                        </th>
                    </tr>
                </thead>
                <tbody>

                    {% for registration in registrations %}
                    <tr
                        class="odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 border-b dark:border-gray-700">

                        <td class="px-6 py-4">
                            {{ forloop.counter }}
                        </td>

                        <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">
                            {{ registration.name }}
                        </th>
                        <td class="px-6 py-4 text-center">
                            {{ registration.course }}- {{ registration.year }}
                        </td>
                        <td class="px-6 py-4 text-center">
                            {{ registration.event }}
                        </td>
                        <td class="px-6 py-4 text-center" style="color: rgb(200, 200, 255); text-decoration: underline;">
                            <a href="{{ registration.payment_screenshot.url }}" target="_blank">
                                View
                            </a>
                        </td>
                        <td class="px-6 py-4 text-center">
                            {{ registration.mobile_number }}
                         </td>
                        <td class="px-6 py-4 text-center">
                           {{ registration.referrance_number }}
                        </td>
                        
                        
                        <td class="px-6 py-4 text-center">
                            <a href="{% url 'approve_registration' registration.id %}" type="button" onclick="confirm('Are you sure you want to approve this registration?')"
                                class="text-white bg-gradient-to-r from-green-400 via-green-500 to-green-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-green-300 dark:focus:ring-green-800 shadow-lg shadow-green-500/50 dark:shadow-lg dark:shadow-green-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2">Approve</a>
                            <a href="{% url 'reject_registration' registration.id %}" type="button" 
                                class="text-white bg-gradient-to-r from-red-400 via-red-500 to-red-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-red-300 dark:focus:ring-red-800 shadow-lg shadow-red-500/50 dark:shadow-lg dark:shadow-red-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2">Reject</a>

                        </td>
                        <!-- <td class="px-6 py-4">
              <a href="#" class="font-medium text-blue-600 dark:text-blue-500 hover:underline">Edit</a>
            </td> -->
                    </tr>

                    {% endfor %}

                </tbody>
                <tfoot>
                    <tr class="font-semibold text-gray-900 dark:text-white dark:bg-green-500">
                        <th scope="row" class="px-6 py-3 text-base">Total</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td class="px-6 py-3 text-center">{{ registrations.count }} </td>
                    </tr>
                </tfoot>
            </table>
        </div>



    </div>




</div>

{% endblock %}